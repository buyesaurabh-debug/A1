ðŸ”´ PRIORITY 0 â€” FOUNDATION (MUST EXIST FIRST)

These are non-negotiable. Everything depends on this.

1. User

Auth via Devise

A user:

Can belong to multiple groups

Can pay expenses

Can owe / be owed

ðŸ“Œ Logic:

User exists independently of groups

Deleting user is out of scope

2. Group

Group has:

name

admin (creator)

Group has many users via group_members

Group has many expenses

ðŸ“Œ Rules:

Anyone can create a group

Creator becomes admin

Users cannot leave group unless net balance = 0

3. Group Membership

Join table: group_members

Prevent duplicate membership

Admin is always a member

ðŸ“Œ Rules:

User must belong to group to see data

Membership is mandatory for expense participation

ðŸ”´ PRIORITY 1 â€” CORE MONEY ENGINE (MOST IMPORTANT)

This is what interviewers care about.

4. Expense (Core Object)

Expense belongs to:

group

payer (User)

Expense has:

description

total_amount

optional tax

ðŸ“Œ Rules:

Only group members can create expense

Payer must be a group member

5. Expense Items

Expense contains multiple items

Each item has:

name

amount

assigned_to OR shared

ðŸ“Œ Rules:

Item can be:

Assigned fully to one user

Shared equally among selected users

Validation:

Sum(items) + tax == total_amount

6. Expense Participants (Balance Engine)

Join table: expense_participants

Fields:

user_id

expense_id

share_amount

ðŸ“Œ Rules:

Each userâ€™s share stored explicitly

No runtime calculation

Balance is derived from stored values

7. Balance Calculation (CRITICAL)

ðŸ“Œ Per user, per group:

total_owed_to_user = sum(shares where user is payer)
total_user_owes    = sum(shares where user is participant)
net_balance        = owed_to_user - user_owes


ðŸ“Œ Rules:

Positive â†’ others owe you

Negative â†’ you owe others

Zero â†’ settled

ðŸ”´ PRIORITY 2 â€” DASHBOARD & VIEWS
8. Dashboard (My View)

Must show:

Total balance

Total you owe

Total owed to you

Friends you owe + amount

Friends who owe you + amount

Your expenses

Friendsâ€™ expenses (group-wise)

ðŸ“Œ Rules:

All numbers derived from expense_participants

No cached values

9. Friend Page

Shows:

Friendâ€™s expenses

Shared expenses with you

Read-only

ðŸŸ  PRIORITY 3 â€” SETTLEMENTS (BONUS BUT IMPORTANT)
10. Settlement

Records a payment between two users

Fields:

from_user

to_user

amount

optional note

ðŸ“Œ Rules:

Settlement creates negative expense

Reduces balances

Cannot over-settle

ðŸ“Œ Important:

Settlement does NOT delete expenses

Settlement affects balances only

ðŸŸ¡ PRIORITY 4 â€” NOTIFICATIONS (ADD AFTER CORE)

These are decoupled from business logic.

11. Email Invites

Triggered when user invited to group

ActionMailer

No tracking / expiry

12. Real-Time Notifications (ActionCable)

Triggered on:

Expense created

Settlement completed

Group invite accepted

ðŸ“Œ Rules:

Notifications are passive

Failure does not rollback transaction